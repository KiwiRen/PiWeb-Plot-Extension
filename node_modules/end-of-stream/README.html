<h1>end-of-stream</h1>
<p>A node module that calls a callback when a readable/writable/duplex stream has completed or failed.</p>
<pre><code>npm install end-of-stream
</code></pre>
<h2>Usage</h2>
<p>Simply pass a stream and a callback to the <code>eos</code>.
Both legacy streams and streams2 are supported.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> eos = <span class="hljs-built_in">require</span>(<span class="hljs-string">'end-of-stream'</span>);

eos(readableStream, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream had an error or closed early'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream has ended'</span>);
});

eos(writableStream, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream had an error or closed early'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream has finished'</span>);
});

eos(duplexStream, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream had an error or closed early'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream has ended and finished'</span>);
});

eos(duplexStream, {<span class="hljs-attr">readable</span>:<span class="hljs-literal">false</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream had an error or closed early'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream has ended but might still be writable'</span>);
});

eos(duplexStream, {<span class="hljs-attr">writable</span>:<span class="hljs-literal">false</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream had an error or closed early'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream has ended but might still be readable'</span>);
});

eos(readableStream, {<span class="hljs-attr">error</span>:<span class="hljs-literal">false</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-comment">// do not treat emit('error', err) as a end-of-stream</span>
});
</code></pre>
<h2>License</h2>
<p>MIT</p>
